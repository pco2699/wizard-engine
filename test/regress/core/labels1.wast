(module
  (func $tuple (param i32 i32) (result i32 i32 i32 i32)
    (if (result i32 i32 i32 i32) (local.get 0)
      (then (local.get 1) (local.get 0) (local.get 0) (local.get 1))
      (else (local.get 0) (local.get 1) (local.get 1) (local.get 0))
    )
  )
  (func (export "add") (param i32 i32) (result i32)
    (call $tuple (local.get 0) (local.get 1))
    (i32.const 4)
    (i32.shl)
    (i32.add)
    (i32.const 4)
    (i32.shl)
    (i32.add)
    (i32.const 4)
    (i32.shl)
    (i32.add)
  )
)

(assert_return (invoke "add" (i32.const 11) (i32.const 23)) (i32.const 97223))
(assert_return (invoke "add" (i32.const 0) (i32.const 45)) (i32.const 12240))
(assert_return (invoke "add" (i32.const 0) (i32.const -17)) (i32.const -4624))
